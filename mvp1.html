<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuckyPlay - Games of Chance</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            background-clip: text;
            color: transparent;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .nav-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 30px;
            border-radius: 50px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-left {
            display: flex;
            gap: 20px;
        }

        .nav-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #FF6B6B, #EE5A24);
        }

        .wallet-display {
            background: rgba(255, 215, 0, 0.2);
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid #FFD700;
            font-weight: bold;
            font-size: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auth-section, .main-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .auth-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }

        .auth-btn {
            width: 100%;
            background: linear-gradient(45deg, #FF6B6B, #EE5A24);
            border: none;
            padding: 15px;
            border-radius: 10px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .game-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .game-card:hover {
            transform: translateY(-5px);
            border-color: #FFD700;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .game-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
        }

        .game-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }

        .game-stats {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .game-stats div {
            margin-bottom: 5px;
        }

        .play-btn {
            width: 100%;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border: none;
            padding: 15px;
            border-radius: 10px;
            color: #333;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .play-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.5);
        }

        .play-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .game-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 2px solid #FFD700;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: white;
        }

        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 20px auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                #FF6B6B 0deg 216deg,
                #4ECDC4 216deg 324deg,
                #FFD93D 324deg 360deg
            );
            position: relative;
            transition: transform 3s cubic-bezier(0.25, 0.1, 0.25, 1);
            border: 5px solid #FFD700;
        }

        .wheel-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #FFD700;
            z-index: 10;
        }

        .dice-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            color: #333;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.5s ease;
        }

        .dice.rolling {
            animation: roll 1s ease-in-out;
        }

        @keyframes roll {
            0%, 100% { transform: rotateX(0deg) rotateY(0deg); }
            25% { transform: rotateX(90deg) rotateY(90deg); }
            50% { transform: rotateX(180deg) rotateY(180deg); }
            75% { transform: rotateX(270deg) rotateY(270deg); }
        }

        .scratch-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 20px auto;
        }

        .scratch-box {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #C0C0C0, #A0A0A0);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .scratch-box:hover {
            transform: scale(1.1);
        }

        .scratch-box.revealed {
            background: linear-gradient(45deg, #4ECDC4, #45B7B8);
            color: white;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .leaderboard-table th,
        .leaderboard-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .leaderboard-table th {
            background: rgba(255, 215, 0, 0.2);
            font-weight: bold;
        }

        .referral-code {
            background: rgba(255, 215, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            border: 2px solid #FFD700;
        }

        .copy-btn {
            background: #4ECDC4;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            margin-left: 10px;
        }

        .wallet-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .wallet-btn {
            background: linear-gradient(45deg, #4ECDC4, #45B7B8);
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .wallet-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 1100;
            opacity: 0;
            transform: translateX(300px);
            transition: all 0.3s ease;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }

        .notification.error {
            background: linear-gradient(45deg, #FF6B6B, #EE5A24);
        }

        .admin-panel {
            background: rgba(255, 0, 0, 0.1);
            border: 2px solid #FF6B6B;
        }

        .admin-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .control-group {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
        }

        .control-group h4 {
            color: #FFD700;
            margin-bottom: 15px;
        }

        .control-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }

        .jackpot-display {
            text-align: center;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #333;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.5em;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .nav-bar {
                flex-direction: column;
                gap: 15px;
            }

            .nav-left {
                justify-content: center;
                flex-wrap: wrap;
            }

            .games-grid {
                grid-template-columns: 1fr;
            }

            .wallet-actions {
                grid-template-columns: 1fr;
            }

            .admin-controls {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üé∞ LuckyPlay</div>
            <p>Your Premier Games of Chance Platform</p>
        </div>

        <!-- Auth Section -->
        <div id="authSection" class="auth-section">
            <div class="auth-form">
                <h2 style="text-align: center; margin-bottom: 30px;">Welcome to LuckyPlay</h2>
                
                <div id="loginForm">
                    <div class="form-group">
                        <label>Email or Phone:</label>
                        <input type="text" id="loginEmail" placeholder="Enter email or phone number">
                    </div>
                    <div class="form-group">
                        <label>Password:</label>
                        <input type="password" id="loginPassword" placeholder="Enter password">
                    </div>
                    <button class="auth-btn" onclick="login()">Login</button>
                    <p style="text-align: center; margin-top: 15px;">
                        Don't have an account? <a href="#" onclick="showRegister()" style="color: #FFD700;">Sign Up</a>
                    </p>
                </div>

                <div id="registerForm" class="hidden">
                    <div class="form-group">
                        <label>Full Name:</label>
                        <input type="text" id="regName" placeholder="Enter full name">
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" id="regEmail" placeholder="Enter email">
                    </div>
                    <div class="form-group">
                        <label>Phone:</label>
                        <input type="tel" id="regPhone" placeholder="Enter phone number">
                    </div>
                    <div class="form-group">
                        <label>Password:</label>
                        <input type="password" id="regPassword" placeholder="Enter password">
                    </div>
                    <div class="form-group">
                        <label>Referral Code (Optional):</label>
                        <input type="text" id="regReferral" placeholder="Enter referral code">
                    </div>
                    <button class="auth-btn" onclick="register()">Sign Up</button>
                    <p style="text-align: center; margin-top: 15px;">
                        Already have an account? <a href="#" onclick="showLogin()" style="color: #FFD700;">Login</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Main App -->
        <div id="mainApp" class="hidden">
            <!-- Navigation Bar -->
            <div class="nav-bar">
                <div class="nav-left">
                    <button class="nav-btn active" onclick="showSection('games')">üéÆ Games</button>
                    <button class="nav-btn" onclick="showSection('wallet')">üí∞ Wallet</button>
                    <button class="nav-btn" onclick="showSection('leaderboard')">üèÜ Leaderboard</button>
                    <button class="nav-btn" onclick="showSection('referrals')">üë• Referrals</button>
                    <button class="nav-btn" onclick="showSection('admin')" id="adminBtn">‚öôÔ∏è Admin</button>
                </div>
                <div class="user-info">
                    <div class="wallet-display">üí≥ Balance: $<span id="userBalance">100.00</span></div>
                    <div>üë§ <span id="userName">Player</span></div>
                    <button class="nav-btn" onclick="logout()">Logout</button>
                </div>
            </div>

            <!-- Games Section -->
            <div id="gamesSection" class="main-content">
                <h2 style="text-align: center; margin-bottom: 30px;">üéÆ Choose Your Game</h2>
                
                <div class="games-grid">
                    <div class="game-card">
                        <span class="game-icon">üé°</span>
                        <div class="game-title">Spin the Wheel</div>
                        <div class="game-stats">
                            <div>üí∞ Entry Fee: $1.00</div>
                            <div>üéØ Win Rate: 40%</div>
                            <div>üíé Max Prize: $5.00</div>
                        </div>
                        <button class="play-btn" onclick="playGame('wheel')">Spin to Win!</button>
                    </div>

                    <div class="game-card">
                        <span class="game-icon">üé≤</span>
                        <div class="game-title">Dice Roll</div>
                        <div class="game-stats">
                            <div>üí∞ Entry Fee: $1.00</div>
                            <div>üéØ Win Rate: 49%</div>
                            <div>üíé Max Prize: $2.00</div>
                        </div>
                        <button class="play-btn" onclick="playGame('dice')">Roll the Dice!</button>
                    </div>

                    <div class="game-card">
                        <span class="game-icon">üì¶</span>
                        <div class="game-title">Scratch Box</div>
                        <div class="game-stats">
                            <div>üí∞ Entry Fee: $0.50</div>
                            <div>üéØ Win Rate: 5%</div>
                            <div>üíé Max Prize: $10.00</div>
                        </div>
                        <button class="play-btn" onclick="playGame('scratch')">Pick Your Box!</button>
                    </div>

                    <div class="game-card">
                        <span class="game-icon">üíé</span>
                        <div class="game-title">Jackpot Draw</div>
                        <div class="game-stats">
                            <div>üí∞ Entry Fee: $1.00</div>
                            <div>üéØ Weekly Draw</div>
                            <div>üíé Current Pool: $<span id="jackpotPool">247</span></div>
                        </div>
                        <button class="play-btn" onclick="playGame('jackpot')">Buy Ticket!</button>
                    </div>
                </div>
            </div>

            <!-- Wallet Section -->
            <div id="walletSection" class="main-content hidden">
                <h2 style="text-align: center; margin-bottom: 30px;">üí∞ Your Wallet</h2>
                
                <div style="text-align: center; margin-bottom: 30px;">
                    <div style="font-size: 2em; color: #FFD700;">$<span id="walletBalance">100.00</span></div>
                    <div style="color: #ccc;">Available Balance</div>
                </div>

                <div class="wallet-actions">
                    <button class="wallet-btn" onclick="showDepositModal()">üí≥ Deposit Funds</button>
                    <button class="wallet-btn" onclick="showWithdrawModal()">üí∏ Withdraw</button>
                    <button class="wallet-btn" onclick="showTransactionHistory()">üìã Transaction History</button>
                </div>

                <div id="transactionHistory" class="hidden" style="margin-top: 30px;">
                    <h3 style="margin-bottom: 20px;">Recent Transactions</h3>
                    <div id="transactionList"></div>
                </div>
            </div>

            <!-- Leaderboard Section -->
            <div id="leaderboardSection" class="main-content hidden">
                <h2 style="text-align: center; margin-bottom: 30px;">üèÜ Weekly Leaderboard</h2>
                
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Player</th>
                            <th>Winnings</th>
                            <th>Games Played</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <tr><td>1</td><td>ü•á Player123</td><td>$156.50</td><td>47</td></tr>
                        <tr><td>2</td><td>ü•à LuckyWinner</td><td>$134.20</td><td>38</td></tr>
                        <tr><td>3</td><td>ü•â GameMaster</td><td>$98.75</td><td>42</td></tr>
                        <tr><td>4</td><td>SpinKing</td><td>$87.30</td><td>31</td></tr>
                        <tr><td>5</td><td>DiceQueen</td><td>$76.90</td><td>29</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- Referrals Section -->
            <div id="referralsSection" class="main-content hidden">
                <h2 style="text-align: center; margin-bottom: 30px;">üë• Referral Program</h2>
                
                <div class="referral-code">
                    <h3>Your Referral Code</h3>
                    <div style="font-size: 1.5em; margin: 10px 0;">LUCKY<span id="userReferralCode">12345</span></div>
                    <button class="copy-btn" onclick="copyReferralCode()">üìã Copy Link</button>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0;">
                    <div style="text-align: center; background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2em; color: #4ECDC4;" id="referralCount">3</div>
                        <div>Total Referrals</div>
                    </div>
                    <div style="text-align: center; background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2em; color: #FFD700;" id="referralEarnings">$15.00</div>
                        <div>Bonus Earned</div>
                    </div>
                    <div style="text-align: center; background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2em; color: #FF6B6B;" id="activeReferrals">2</div>
                        <div>Active This Week</div>
                    </div>
                </div>

                <h3>Referral Benefits</h3>
                <ul style="margin: 20px 0; padding-left: 20px;">
                    <li>Earn $5 for each friend who signs up</li>
                    <li>Get $10 bonus when they make their first deposit</li>
                    <li>Maximum 20 referrals per month</li>
                    <li>Bonuses paid instantly to your wallet</li>
                </ul>
            </div>

            <!-- Admin Section -->
            <div id="adminSection" class="main-content admin-panel hidden">
                <h2 style="text-align: center; margin-bottom: 30px;">‚öôÔ∏è Admin Control Panel</h2>
                
                <div class="admin-controls">
                    <div class="control-group">
                        <h4>üé° Wheel Game Settings</h4>
                        <label>Entry Fee: $<input type="number" class="control-input" id="wheelFee" value="1.00" step="0.01"></label>
                        <label>Lose Rate %: <input type="number" class="control-input" id="wheelLose" value="60" max="100"></label>
                        <label>Small Win %: <input type="number" class="control-input" id="wheelSmall" value="30" max="100"></label>
                        <label>Big Win %: <input type="number" class="control-input" id="wheelBig" value="10" max="100"></label>
                        <button class="wallet-btn" onclick="updateGameSettings('wheel')">Update</button>
                    </div>

                    <div class="control-group">
                        <h4>üé≤ Dice Game Settings</h4>
                        <label>Entry Fee: $<input type="number" class="control-input" id="diceFee" value="1.00" step="0.01"></label>
                        <label>Win Rate %: <input type="number" class="control-input" id="diceWin" value="49" max="100"></label>
                        <label>Payout Multiplier: <input type="number" class="control-input" id="diceMultiplier" value="2" step="0.1"></label>
                        <button class="wallet-btn" onclick="updateGameSettings('dice')">Update</button>
                    </div>

                    <div class="control-group">
                        <h4>üì¶ Scratch Game Settings</h4>
                        <label>Entry Fee: $<input type="number" class="control-input" id="scratchFee" value="0.50" step="0.01"></label>
                        <label>Win Rate %: <input type="number" class="control-input" id="scratchWin" value="5" max="100"></label>
                        <label>Prize Amount: $<input type="number" class="control-input" id="scratchPrize" value="10.00" step="0.01"></label>
                        <button class="wallet-btn" onclick="updateGameSettings('scratch')">Update</button>
                    </div>

                    <div class="control-group">
                        <h4>üìä Platform Stats</h4>
                        <div>Total Users: <strong>1,247</strong></div>
                        <div>Active Today: <strong>156</strong></div>
                        <div>Total Deposits: <strong>$12,450</strong></div>
                        <div>Total Withdrawals: <strong>$8,230</strong></div>
                        <div>House Profit: <strong>$4,220</strong></div>
                        <button class="wallet-btn" onclick="refreshStats()">Refresh Stats</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Modals -->
    <div id="gameModal" class="game-modal">
        <div class="modal-content" style="position: relative;">
            <span class="close-btn" onclick="closeGameModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
        // Game state and user data
        let currentUser = null;
        let gameSettings = {
            wheel: { fee: 1.00, loseRate: 60, smallWin: 30, bigWin: 10, smallPrize: 2, bigPrize: 5 },
            dice: { fee: 1.00, winRate: 49, multiplier: 2 },
            scratch: { fee: 0.50, winRate: 5, prize: 10.00 },
            jackpot: { fee: 1.00, pool: 247 }
        };

        let users = {
            'demo@luckyplay.com': {
                name: 'Demo Player',
                email: 'demo@luckyplay.com',
                phone: '+1234567890',
                password: 'demo123',
                balance: 100.00,
                referralCode: '12345',
                referrals: 3,
                referralEarnings: 15.00,
                isAdmin: true,
                kycStatus: 'verified',
                transactions: [
                    { type: 'deposit', amount: 50.00, method: 'Card', date: '2025-08-05', status: 'completed' },
                    { type: 'win', amount: 5.00, game: 'Wheel', date: '2025-08-05', status: 'completed' },
                    { type: 'bet', amount: -1.00, game: 'Dice', date: '2025-08-05', status: 'completed' }
                ]
            }
        };

        let leaderboard = [
            { name: 'Player123', winnings: 156.50, games: 47 },
            { name: 'LuckyWinner', winnings: 134.20, games: 38 },
            { name: 'GameMaster', winnings: 98.75, games: 42 },
            { name: 'SpinKing', winnings: 87.30, games: 31 },
            { name: 'DiceQueen', winnings: 76.90, games: 29 }
        ];

        // Authentication functions
        function showLogin() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('registerForm').classList.add('hidden');
        }

        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showNotification('Please fill in all fields', 'error');
                return;
            }

            // Demo login - in production this would be server-side authentication
            if (email === 'demo@luckyplay.com' && password === 'demo123') {
                currentUser = users[email];
                document.getElementById('authSection').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userBalance').textContent = currentUser.balance.toFixed(2);
                document.getElementById('walletBalance').textContent = currentUser.balance.toFixed(2);
                document.getElementById('userReferralCode').textContent = currentUser.referralCode;
                document.getElementById('referralCount').textContent = currentUser.referrals;
                document.getElementById('referralEarnings').textContent = '$' + currentUser.referralEarnings.toFixed(2);
                
                if (currentUser.isAdmin) {
                    document.getElementById('adminBtn').classList.remove('hidden');
                }
                
                showNotification('Welcome back, ' + currentUser.name + '!', 'success');
            } else {
                showNotification('Invalid credentials. Try demo@luckyplay.com / demo123', 'error');
            }
        }

        function register() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const password = document.getElementById('regPassword').value;
            const referral = document.getElementById('regReferral').value;

            if (!name || !email || !phone || !password) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }

            if (users[email]) {
                showNotification('Email already registered', 'error');
                return;
            }

            // Create new user
            const newReferralCode = Math.floor(10000 + Math.random() * 90000).toString();
            users[email] = {
                name: name,
                email: email,
                phone: phone,
                password: password,
                balance: 50.00, // Welcome bonus
                referralCode: newReferralCode,
                referrals: 0,
                referralEarnings: 0.00,
                isAdmin: false,
                kycStatus: 'pending',
                transactions: [
                    { type: 'bonus', amount: 50.00, method: 'Welcome Bonus', date: new Date().toISOString().split('T')[0], status: 'completed' }
                ]
            };

            // Process referral bonus
            if (referral) {
                for (let userEmail in users) {
                    if (users[userEmail].referralCode === referral) {
                        users[userEmail].referrals++;
                        users[userEmail].referralEarnings += 5.00;
                        users[userEmail].balance += 5.00;
                        users[userEmail].transactions.push({
                            type: 'referral', amount: 5.00, method: 'Referral Bonus', 
                            date: new Date().toISOString().split('T')[0], status: 'completed'
                        });
                        break;
                    }
                }
            }

            showNotification('Registration successful! Welcome bonus of $50 added!', 'success');
            
            // Auto-login
            currentUser = users[email];
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userBalance').textContent = currentUser.balance.toFixed(2);
            document.getElementById('walletBalance').textContent = currentUser.balance.toFixed(2);
            document.getElementById('userReferralCode').textContent = currentUser.referralCode;
        }

        function logout() {
            currentUser = null;
            document.getElementById('authSection').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            showLogin();
            showNotification('Logged out successfully', 'success');
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.main-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName + 'Section').classList.remove('hidden');
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Special handling for different sections
            if (sectionName === 'wallet') {
                updateWalletDisplay();
            } else if (sectionName === 'leaderboard') {
                updateLeaderboard();
            }
        }

        // Game functions
        function playGame(gameType) {
            const game = gameSettings[gameType];
            
            if (currentUser.balance < game.fee) {
                showNotification('Insufficient balance!', 'error');
                return;
            }
            
            document.getElementById('gameModal').style.display = 'flex';
            
            switch(gameType) {
                case 'wheel':
                    setupWheelGame();
                    break;
                case 'dice':
                    setupDiceGame();
                    break;
                case 'scratch':
                    setupScratchGame();
                    break;
                case 'jackpot':
                    buyJackpotTicket();
                    break;
            }
        }

        function setupWheelGame() {
            document.getElementById('modalContent').innerHTML = `
                <h2>üé° Spin the Wheel</h2>
                <p>Entry Fee: ${gameSettings.wheel.fee.toFixed(2)}</p>
                <div class="wheel-container">
                    <div class="wheel-pointer"></div>
                    <div class="wheel" id="gameWheel"></div>
                </div>
                <button class="play-btn" onclick="spinWheel()" id="spinBtn">Spin Now!</button>
                <div id="wheelResult" style="margin-top: 20px; font-size: 1.2em; font-weight: bold;"></div>
            `;
        }

        function spinWheel() {
            if (currentUser.balance < gameSettings.wheel.fee) {
                showNotification('Insufficient balance!', 'error');
                return;
            }

            // Deduct entry fee
            currentUser.balance -= gameSettings.wheel.fee;
            updateBalance();
            
            document.getElementById('spinBtn').disabled = true;
            
            // Determine outcome
            const random = Math.random() * 100;
            let result = 'lose';
            let prize = 0;
            
            if (random < gameSettings.wheel.bigWin) {
                result = 'bigwin';
                prize = gameSettings.wheel.bigPrize;
            } else if (random < gameSettings.wheel.bigWin + gameSettings.wheel.smallWin) {
                result = 'smallwin';
                prize = gameSettings.wheel.smallPrize;
            }
            
            // Spin animation
            const wheel = document.getElementById('gameWheel');
            const rotation = 1800 + Math.random() * 1800; // 5-10 full rotations
            wheel.style.transform = `rotate(${rotation}deg)`;
            
            setTimeout(() => {
                if (prize > 0) {
                    currentUser.balance += prize;
                    updateBalance();
                    document.getElementById('wheelResult').innerHTML = `
                        <div style="color: #4ECDC4;">üéâ Congratulations!</div>
                        <div>You won ${prize.toFixed(2)}!</div>
                    `;
                    showNotification(`You won ${prize.toFixed(2)}!`, 'success');
                    
                    // Add transaction
                    currentUser.transactions.unshift({
                        type: 'win', amount: prize, game: 'Wheel',
                        date: new Date().toISOString().split('T')[0], status: 'completed'
                    });
                } else {
                    document.getElementById('wheelResult').innerHTML = `
                        <div style="color: #FF6B6B;">üòî Better luck next time!</div>
                        <div>Try again?</div>
                    `;
                }
                
                // Add bet transaction
                currentUser.transactions.unshift({
                    type: 'bet', amount: -gameSettings.wheel.fee, game: 'Wheel',
                    date: new Date().toISOString().split('T')[0], status: 'completed'
                });
                
                document.getElementById('spinBtn').disabled = false;
                document.getElementById('spinBtn').textContent = 'Spin Again!';
            }, 3000);
        }

        function setupDiceGame() {
            document.getElementById('modalContent').innerHTML = `
                <h2>üé≤ Dice Roll</h2>
                <p>Entry Fee: ${gameSettings.dice.fee.toFixed(2)} | Win Rate: ${gameSettings.dice.winRate}%</p>
                <div class="dice-container">
                    <div class="dice" id="dice1">?</div>
                    <div class="dice" id="dice2">?</div>
                </div>
                <div style="margin: 20px 0;">
                    <label><input type="radio" name="bet" value="even" checked> Even</label>
                    <label style="margin-left: 20px;"><input type="radio" name="bet" value="odd"> Odd</label>
                </div>
                <button class="play-btn" onclick="rollDice()" id="rollBtn">Roll Dice!</button>
                <div id="diceResult" style="margin-top: 20px; font-size: 1.2em; font-weight: bold;"></div>
            `;
        }

        function rollDice() {
            if (currentUser.balance < gameSettings.dice.fee) {
                showNotification('Insufficient balance!', 'error');
                return;
            }

            // Deduct entry fee
            currentUser.balance -= gameSettings.dice.fee;
            updateBalance();
            
            document.getElementById('rollBtn').disabled = true;
            
            const dice1 = document.getElementById('dice1');
            const dice2 = document.getElementById('dice2');
            
            // Rolling animation
            dice1.classList.add('rolling');
            dice2.classList.add('rolling');
            
            setTimeout(() => {
                // Determine if player should win based on win rate
                const shouldWin = Math.random() * 100 < gameSettings.dice.winRate;
                const selectedBet = document.querySelector('input[name="bet"]:checked').value;
                
                let die1Value, die2Value, sum;
                
                if (shouldWin) {
                    // Force a win
                    if (selectedBet === 'even') {
                        // Make sure sum is even
                        die1Value = Math.floor(Math.random() * 6) + 1;
                        die2Value = Math.floor(Math.random() * 3) * 2 + 1; // 1, 3, or 5
                        if ((die1Value + die2Value) % 2 !== 0) die2Value = die2Value === 5 ? 2 : die2Value + 1;
                    } else {
                        // Make sure sum is odd
                        die1Value = Math.floor(Math.random() * 3) * 2 + 1; // 1, 3, or 5
                        die2Value = Math.floor(Math.random() * 3) * 2 + 2; // 2, 4, or 6
                    }
                } else {
                    // Force a loss
                    die1Value = Math.floor(Math.random() * 6) + 1;
                    die2Value = Math.floor(Math.random() * 6) + 1;
                    sum = die1Value + die2Value;
                    
                    if ((selectedBet === 'even' && sum % 2 === 0) || 
                        (selectedBet === 'odd' && sum % 2 !== 0)) {
                        // Player would win, so change one die
                        die2Value = die2Value === 6 ? 1 : die2Value + 1;
                    }
                }
                
                sum = die1Value + die2Value;
                dice1.textContent = die1Value;
                dice2.textContent = die2Value;
                dice1.classList.remove('rolling');
                dice2.classList.remove('rolling');
                
                const isEven = sum % 2 === 0;
                const playerWon = (selectedBet === 'even' && isEven) || (selectedBet === 'odd' && !isEven);
                
                if (playerWon) {
                    const prize = gameSettings.dice.fee * gameSettings.dice.multiplier;
                    currentUser.balance += prize;
                    updateBalance();
                    
                    document.getElementById('diceResult').innerHTML = `
                        <div style="color: #4ECDC4;">üéâ Winner!</div>
                        <div>Sum: ${sum} (${isEven ? 'Even' : 'Odd'})</div>
                        <div>You won ${prize.toFixed(2)}!</div>
                    `;
                    showNotification(`You won ${prize.toFixed(2)}!`, 'success');
                    
                    currentUser.transactions.unshift({
                        type: 'win', amount: prize, game: 'Dice',
                        date: new Date().toISOString().split('T')[0], status: 'completed'
                    });
                } else {
                    document.getElementById('diceResult').innerHTML = `
                        <div style="color: #FF6B6B;">üòî You Lost!</div>
                        <div>Sum: ${sum} (${isEven ? 'Even' : 'Odd'})</div>
                        <div>Better luck next time!</div>
                    `;
                }
                
                currentUser.transactions.unshift({
                    type: 'bet', amount: -gameSettings.dice.fee, game: 'Dice',
                    date: new Date().toISOString().split('T')[0], status: 'completed'
                });
                
                document.getElementById('rollBtn').disabled = false;
                document.getElementById('rollBtn').textContent = 'Roll Again!';
            }, 1000);
        }

        function setupScratchGame() {
            document.getElementById('modalContent').innerHTML = `
                <h2>üì¶ Scratch Box</h2>
                <p>Entry Fee: ${gameSettings.scratch.fee.toFixed(2)} | Win Rate: ${gameSettings.scratch.winRate}%</p>
                <div class="scratch-grid" id="scratchGrid"></div>
                <button class="play-btn" onclick="playScratch()" id="scratchBtn">Pay & Play!</button>
                <div id="scratchResult" style="margin-top: 20px; font-size: 1.2em; font-weight: bold;"></div>
            `;
            
            // Create 20 scratch boxes
            const grid = document.getElementById('scratchGrid');
            for (let i = 0; i < 20; i++) {
                const box = document.createElement('div');
                box.className = 'scratch-box';
                box.textContent = '?';
                box.onclick = () => scratchBox(box, i);
                grid.appendChild(box);
            }
        }

        function playScratch() {
            if (currentUser.balance < gameSettings.scratch.fee) {
                showNotification('Insufficient balance!', 'error');
                return;
            }

            currentUser.balance -= gameSettings.scratch.fee;
            updateBalance();
            
            document.getElementById('scratchBtn').disabled = true;
            document.getElementById('scratchBtn').textContent = 'Pick a Box!';
            
            // Determine winning box
            window.scratchWinningBox = Math.random() * 100 < gameSettings.scratch.winRate ? 
                Math.floor(Math.random() * 20) : -1;
        }

        function scratchBox(box, index) {
            if (!document.getElementById('scratchBtn').disabled) {
                showNotification('Please pay to play first!', 'error');
                return;
            }
            
            if (box.classList.contains('revealed')) return;
            
            box.classList.add('revealed');
            
            if (index === window.scratchWinningBox) {
                box.textContent = 'üíé';
                const prize = gameSettings.scratch.prize;
                currentUser.balance += prize;
                updateBalance();
                
                document.getElementById('scratchResult').innerHTML = `
                    <div style="color: #4ECDC4;">üéâ JACKPOT!</div>
                    <div>You won ${prize.toFixed(2)}!</div>
                `;
                showNotification(`Jackpot! You won ${prize.toFixed(2)}!`, 'success');
                
                currentUser.transactions.unshift({
                    type: 'win', amount: prize, game: 'Scratch',
                    date: new Date().toISOString().split('T')[0], status: 'completed'
                });
                
                // Reveal all boxes
                document.querySelectorAll('.scratch-box').forEach((b, i) => {
                    if (!b.classList.contains('revealed')) {
                        b.classList.add('revealed');
                        b.textContent = i === window.scratchWinningBox ? 'üíé' : 'üí•';
                    }
                });
            } else {
                box.textContent = 'üí•';
                
                // Check if this was the last box
                const revealedBoxes = document.querySelectorAll('.scratch-box.revealed').length;
                if (revealedBoxes === 20 || window.scratchWinningBox === -1) {
                    document.getElementById('scratchResult').innerHTML = `
                        <div style="color: #FF6B6B;">üòî No luck this time!</div>
                        <div>Try again?</div>
                    `;
                    
                    // Reveal all remaining boxes
                    document.querySelectorAll('.scratch-box').forEach((b, i) => {
                        if (!b.classList.contains('revealed')) {
                            b.classList.add('revealed');
                            b.textContent = 'üí•';
                        }
                    });
                }
            }
            
            currentUser.transactions.unshift({
                type: 'bet', amount: -gameSettings.scratch.fee, game: 'Scratch',
                date: new Date().toISOString().split('T')[0], status: 'completed'
            });
            
            document.getElementById('scratchBtn').disabled = false;
            document.getElementById('scratchBtn').textContent = 'Play Again!';
        }

        function buyJackpotTicket() {
            if (currentUser.balance < gameSettings.jackpot.fee) {
                showNotification('Insufficient balance!', 'error');
                closeGameModal();
                return;
            }

            currentUser.balance -= gameSettings.jackpot.fee;
            gameSettings.jackpot.pool += gameSettings.jackpot.fee;
            updateBalance();
            
            const ticketNumber = Math.floor(100000 + Math.random() * 900000);
            
            document.getElementById('modalContent').innerHTML = `
                <h2>üíé Jackpot Ticket</h2>
                <div class="jackpot-display">
                    Current Pool: ${gameSettings.jackpot.pool}
                </div>
                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h3>Your Ticket</h3>
                    <div style="font-size: 1.5em; font-family: monospace; color: #FFD700;">
                        #${ticketNumber}
                    </div>
                    <div style="margin-top: 10px; color: #ccc;">
                        Next draw: Every Sunday 8PM EST
                    </div>
                </div>
                <p>Good luck! You'll be notified if you win.</p>
                <button class="play-btn" onclick="buyJackpotTicket()">Buy Another Ticket</button>
            `;
            
            document.getElementById('jackpotPool').textContent = gameSettings.jackpot.pool;
            showNotification('Jackpot ticket purchased! Good luck!', 'success');
            
            currentUser.transactions.unshift({
                type: 'bet', amount: -gameSettings.jackpot.fee, game: 'Jackpot',
                date: new Date().toISOString().split('T')[0], status: 'completed'
            });
        }

        function closeGameModal() {
            document.getElementById('gameModal').style.display = 'none';
        }

        // Utility functions
        function updateBalance() {
            document.getElementById('userBalance').textContent = currentUser.balance.toFixed(2);
            document.getElementById('walletBalance').textContent = currentUser.balance.toFixed(2);
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Wallet functions
        function updateWalletDisplay() {
            document.getElementById('walletBalance').textContent = currentUser.balance.toFixed(2);
        }

        function showDepositModal() {
            const modalContent = `
                <h2>üí≥ Deposit Funds</h2>
                <div style="margin: 20px 0;">
                    <label>Amount: $<input type="number" id="depositAmount" placeholder="10.00" step="0.01" min="1"></label>
                </div>
                <div style="margin: 20px 0;">
                    <h4>Payment Method:</h4>
                    <label><input type="radio" name="paymentMethod" value="mtn" checked> MTN Mobile Money</label><br>
                    <label><input type="radio" name="paymentMethod" value="vodafone"> Vodafone Cash</label><br>
                    <label><input type="radio" name="paymentMethod" value="card"> Credit/Debit Card</label><br>
                    <label><input type="radio" name="paymentMethod" value="crypto"> Cryptocurrency (USDT)</label>
                </div>
                <button class="play-btn" onclick="processDeposit()">Deposit Now</button>
            `;
            
            document.getElementById('modalContent').innerHTML = modalContent;
            document.getElementById('gameModal').style.display = 'flex';
        }

        function processDeposit() {
            const amount = parseFloat(document.getElementById('depositAmount').value);
            const method = document.querySelector('input[name="paymentMethod"]:checked').value;
            
            if (!amount || amount < 1) {
                showNotification('Please enter a valid amount', 'error');
                return;
            }
            
            // In a real app, this would integrate with payment processors
            // For demo, we'll simulate a successful deposit
            const fee = amount * 0.03; // 3% transaction fee
            const netAmount = amount - fee;
            
            currentUser.balance += netAmount;
            updateBalance();
            
            const methodNames = {
                mtn: 'MTN Mobile Money',
                vodafone: 'Vodafone Cash',
                card: 'Credit Card',
                crypto: 'USDT'
            };
            
            currentUser.transactions.unshift({
                type: 'deposit',
                amount: netAmount,
                method: methodNames[method],
                date: new Date().toISOString().split('T')[0],
                status: 'completed'
            });
            
            showNotification(`Deposit successful! ${netAmount.toFixed(2)} added (fee: ${fee.toFixed(2)})`, 'success');
            closeGameModal();
        }

        function showWithdrawModal() {
            const modalContent = `
                <h2>üí∏ Withdraw Funds</h2>
                <div style="margin: 20px 0;">
                    <label>Amount: $<input type="number" id="withdrawAmount" placeholder="10.00" step="0.01" min="10"></label>
                    <div style="color: #ccc; font-size: 0.9em;">Minimum withdrawal: $10.00</div>
                </div>
                <div style="margin: 20px 0;">
                    <h4>Withdrawal Method:</h4>
                    <label><input type="radio" name="withdrawMethod" value="mtn" checked> MTN Mobile Money</label><br>
                    <label><input type="radio" name="withdrawMethod" value="vodafone"> Vodafone Cash</label><br>
                    <label><input type="radio" name="withdrawMethod" value="bank"> Bank Transfer</label>
                </div>
                <div style="background: rgba(255, 215, 0, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                    ‚ö†Ô∏è KYC verification required for withdrawals. Processing time: 1-3 business days.
                </div>
                <button class="play-btn" onclick="processWithdraw()">Request Withdrawal</button>
            `;
            
            document.getElementById('modalContent').innerHTML = modalContent;
            document.getElementById('gameModal').style.display = 'flex';
        }

        function processWithdraw() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const method = document.querySelector('input[name="withdrawMethod"]:checked').value;
            
            if (!amount || amount < 10) {
                showNotification('Minimum withdrawal is $10.00', 'error');
                return;
            }
            
            if (amount > currentUser.balance) {
                showNotification('Insufficient balance', 'error');
                return;
            }
            
            // 5% withdrawal fee
            const fee = amount * 0.05;
            const netAmount = amount - fee;
            
            currentUser.balance -= amount;
            updateBalance();
            
            const methodNames = {
                mtn: 'MTN Mobile Money',
                vodafone: 'Vodafone Cash', 
                bank: 'Bank Transfer'
            };
            
            currentUser.transactions.unshift({
                type: 'withdraw',
                amount: -amount,
                method: methodNames[method],
                date: new Date().toISOString().split('T')[0],
                status: 'pending'
            });
            
            showNotification(`Withdrawal request submitted! You'll receive ${netAmount.toFixed(2)} (fee: ${fee.toFixed(2)})`, 'success');
            closeGameModal();
        }

        function showTransactionHistory() {
            const historyDiv = document.getElementById('transactionHistory');
            const listDiv = document.getElementById('transactionList');
            
            if (historyDiv.classList.contains('hidden')) {
                historyDiv.classList.remove('hidden');
                
                let html = '';
                currentUser.transactions.forEach(tx => {
                    const typeIcon = {
                        deposit: 'üí≥',
                        withdraw: 'üí∏', 
                        win: 'üéâ',
                        bet: 'üéÆ',
                        bonus: 'üéÅ',
                        referral: 'üë•'
                    };
                    
                    const statusColor = tx.status === 'completed' ? '#4ECDC4' : 
                                      tx.status === 'pending' ? '#FFD700' : '#FF6B6B';
                    
                    html += `
                        <div style="display: flex; justify-content: space-between; align-items: center; 
                                   padding: 15px; background: rgba(0,0,0,0.3); margin-bottom: 10px; border-radius: 10px;">
                            <div>
                                <div>${typeIcon[tx.type]} ${tx.type.charAt(0).toUpperCase() + tx.type.slice(1)}</div>
                                <div style="color: #ccc; font-size: 0.9em;">${tx.method || tx.game} ‚Ä¢ ${tx.date}</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: ${tx.amount > 0 ? '#4ECDC4' : '#FF6B6B'};">
                                    ${tx.amount > 0 ? '+' : ''}${Math.abs(tx.amount).toFixed(2)}
                                </div>
                                <div style="color: ${statusColor}; font-size: 0.8em; text-transform: uppercase;">
                                    ${tx.status}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                listDiv.innerHTML = html || '<div style="text-align: center; color: #ccc;">No transactions yet</div>';
            } else {
                historyDiv.classList.add('hidden');
            }
        }

        // Leaderboard functions
        function updateLeaderboard() {
            const tbody = document.getElementById('leaderboardBody');
            let html = '';
            
            leaderboard.forEach((player, index) => {
                const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : '';
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${medal} ${player.name}</td>
                        <td>${player.winnings.toFixed(2)}</td>
                        <td>${player.games}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }

        // Referral functions
        function copyReferralCode() {
            const referralLink = `https://luckyplay.com/ref/${currentUser.referralCode}`;
            navigator.clipboard.writeText(referralLink).then(() => {
                showNotification('Referral link copied to clipboard!', 'success');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = referralLink;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('Referral link copied to clipboard!', 'success');
            });
        }

        // Admin functions
        function updateGameSettings(gameType) {
            if (!currentUser.isAdmin) {
                showNotification('Access denied', 'error');
                return;
            }
            
            switch(gameType) {
                case 'wheel':
                    gameSettings.wheel.fee = parseFloat(document.getElementById('wheelFee').value);
                    gameSettings.wheel.loseRate = parseInt(document.getElementById('wheelLose').value);
                    gameSettings.wheel.smallWin = parseInt(document.getElementById('wheelSmall').value);
                    gameSettings.wheel.bigWin = parseInt(document.getElementById('wheelBig').value);
                    break;
                case 'dice':
                    gameSettings.dice.fee = parseFloat(document.getElementById('diceFee').value);
                    gameSettings.dice.winRate = parseInt(document.getElementById('diceWin').value);
                    gameSettings.dice.multiplier = parseFloat(document.getElementById('diceMultiplier').value);
                    break;
                case 'scratch':
                    gameSettings.scratch.fee = parseFloat(document.getElementById('scratchFee').value);
                    gameSettings.scratch.winRate = parseInt(document.getElementById('scratchWin').value);
                    gameSettings.scratch.prize = parseFloat(document.getElementById('scratchPrize').value);
                    break;
            }
            
            showNotification(`${gameType.charAt(0).toUpperCase() + gameType.slice(1)} game settings updated!`, 'success');
            updateGameCards();
        }

        function updateGameCards() {
            // Update the game cards with new settings
            const gameCards = document.querySelectorAll('.game-card');
            
            gameCards[0].querySelector('.game-stats').innerHTML = `
                <div>üí∞ Entry Fee: ${gameSettings.wheel.fee.toFixed(2)}</div>
                <div>üéØ Win Rate: ${gameSettings.wheel.smallWin + gameSettings.wheel.bigWin}%</div>
                <div>üíé Max Prize: ${gameSettings.wheel.bigPrize.toFixed(2)}</div>
            `;
            
            gameCards[1].querySelector('.game-stats').innerHTML = `
                <div>üí∞ Entry Fee: ${gameSettings.dice.fee.toFixed(2)}</div>
                <div>üéØ Win Rate: ${gameSettings.dice.winRate}%</div>
                <div>üíé Max Prize: ${(gameSettings.dice.fee * gameSettings.dice.multiplier).toFixed(2)}</div>
            `;
            
            gameCards[2].querySelector('.game-stats').innerHTML = `
                <div>üí∞ Entry Fee: ${gameSettings.scratch.fee.toFixed(2)}</div>
                <div>üéØ Win Rate: ${gameSettings.scratch.winRate}%</div>
                <div>üíé Max Prize: ${gameSettings.scratch.prize.toFixed(2)}</div>
            `;
        }

        function refreshStats() {
            if (!currentUser.isAdmin) {
                showNotification('Access denied', 'error');
                return;
            }
            
            // Simulate refreshing stats
            showNotification('Stats refreshed!', 'success');
        }

        // Initialize demo data on page load
        window.addEventListener('load', () => {
            // Pre-fill demo login for easy testing
            document.getElementById('loginEmail').value = 'demo@luckyplay.com';
            document.getElementById('loginPassword').value = 'demo123';
            
            // Add some variety to the jackpot pool
            setInterval(() => {
                if (Math.random() > 0.7) { // 30% chance every 5 seconds
                    gameSettings.jackpot.pool += gameSettings.jackpot.fee;
                    document.getElementById('jackpotPool').textContent = gameSettings.jackpot.pool;
                }
            }, 5000);
            
            showNotification('Welcome to LuckyPlay! Use demo@luckyplay.com / demo123 to login', 'success');
        });

        // Close modal when clicking outside
        document.getElementById('gameModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('gameModal')) {
                closeGameModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeGameModal();
            }
        });

        // Prevent right-click on game elements (adds to the casino feel)
        document.addEventListener('contextmenu', (e) => {
            if (e.target.closest('.game-card') || e.target.closest('.modal-content')) {
                e.preventDefault();
            }
        });

        // Add some dynamic effects
        setInterval(() => {
            const cards = document.querySelectorAll('.game-card');
            cards.forEach(card => {
                if (Math.random() > 0.95) { // 5% chance
                    card.style.boxShadow = '0 0 20px rgba(255, 215, 0, 0.3)';
                    setTimeout(() => {
                        card.style.boxShadow = '';
                    }, 1000);
                }
            });
        }, 2000);

        // Sound effects simulation (visual feedback)
        function playSound(type) {
            const notification = document.getElementById('notification');
            if (type === 'win') {
                notification.style.background = 'linear-gradient(45deg, #4ECDC4, #45B7B8)';
            } else if (type === 'lose') {
                notification.style.background = 'linear-gradient(45deg, #FF6B6B, #EE5A24)';
            }
        }

        // Add some gamification elements
        function checkAchievements() {
            const totalWins = currentUser.transactions.filter(t => t.type === 'win').length;
            const totalBets = currentUser.transactions.filter(t => t.type === 'bet').length;
            
            if (totalWins === 1) {
                showNotification('üèÜ Achievement: First Win!', 'success');
            } else if (totalWins === 5) {
                showNotification('üèÜ Achievement: Lucky Streak!', 'success');
            } else if (totalBets === 10) {
                showNotification('üèÜ Achievement: High Roller!', 'success');
            }
        }

        // Call achievement check after each game
        const originalShowNotification = showNotification;
        showNotification = function(message, type) {
            originalShowNotification(message, type);
            if (currentUser && (message.includes('won') || message.includes('purchased'))) {
                setTimeout(checkAchievements, 1500);
            }
        };

        // Mobile-specific optimizations
        if (window.innerWidth <= 768) {
            // Reduce animation durations for mobile
            document.documentElement.style.setProperty('--animation-duration', '0.2s');
            
            // Optimize touch interactions
            document.addEventListener('touchstart', () => {}, { passive: true });
        }

        // Progressive Web App features
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => {
                // Service worker registration failed - not critical for demo
            });
        }

        // Add install prompt for mobile
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button after user has played a few games
            setTimeout(() => {
                if (currentUser && currentUser.transactions.filter(t => t.type === 'bet').length > 3) {
                    const installBtn = document.createElement('button');
                    installBtn.textContent = 'üì± Install App';
                    installBtn.className = 'nav-btn';
                    installBtn.onclick = () => {
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then(() => {
                            deferredPrompt = null;
                            installBtn.remove();
                        });
                    };
                    document.querySelector('.nav-left').appendChild(installBtn);
                }
            }, 30000); // Show after 30 seconds
        });
    </script>
</body>
</html> 